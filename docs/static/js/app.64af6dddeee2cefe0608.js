webpackJsonp([1],{"+Ziz":function(t,e){},"3s6k":function(t,e){},"90NL":function(t,e){},B3Z9:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r=a("4Imv"),i=a("Gvdl"),n=a.n(i),c=a("aK3Z"),l=a.n(c),u=a("/ocq"),o=a("INCx"),d=a.n(o),m=a("mtWM"),p=a.n(m),h=new n.a.ReplaySubject(1),v=new n.a.ReplaySubject(1),f=new n.a.ReplaySubject(1),g=function(){var t=new Date;v.next(t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes())};setInterval(g,6e4);var _={$currentTemperature:h,$currentTime:v,$recentHistoric:f,retrieveCurrentTemperature:function(){var t=new Date;t.setMinutes(t.getMinutes()-10);var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),r=t.getHours(),i=t.getMinutes(),n=t.getSeconds();a<10&&(a="0"+a),s<10&&(s="0"+s),r<10&&(r="0"+r),i<10&&(i="0"+i),n<10&&(n="0"+n);var c=""+e+a+s+r+i+n;p.a.get('https://smart-thermostat-2c65a.firebaseio.com/temperature.json?orderBy="date"&startAt="'+c+'"&limitToLast=1').then(function(t){for(var e in t.data)t.data.hasOwnProperty(e)&&h.next(t.data[e].value)})},retrieveRecentHistoric:function(){var t=new Date;t.setDate(t.getDate()-1);var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),r=t.getHours(),i=t.getMinutes(),n=t.getSeconds();a<10&&(a="0"+a),s<10&&(s="0"+s),r<10&&(r="0"+r),i<10&&(i="0"+i),n<10&&(n="0"+n);var c=""+e+a+s+r+i+n;p.a.get('https://smart-thermostat-2c65a.firebaseio.com/temperature.json?orderBy="date"&startAt="'+c+'"&limitToLast=288').then(function(t){var e=[];for(var a in t.data)t.data.hasOwnProperty(a)&&e.push(t.data[a]);e=e.sort(function(t,e){return t.date<e.date?-1:t.date>e.date?1:0}).map(function(t){return d()(10*t.value)/10}),f.next(e)})},updateTime:g},T=a("Gu7T"),y=a.n(T),x={minFromRange:function(t){return Math.min.apply(Math,y()(t))},maxFromRange:function(t){return Math.max.apply(Math,y()(t))},truncateTemperature:function(t){return d()(10*t)/10}},b={name:"status",subscriptions:{currentTemperature:_.$currentTemperature,currentTime:_.$currentTime},filters:{truncateTemperature:x.truncateTemperature}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status"},[a("div",{staticClass:"roundedArea"},[a("div",{staticClass:"content"},[null!=t.currentTemperature?a("div",{staticClass:"temperature"},[t._v(t._s(t._f("truncateTemperature")(t.currentTemperature))+"°C")]):a("div",{staticClass:"no-temperature"},[t._v("Error")]),t._v(" "),a("div",{staticClass:"time"},[t._v(t._s(t.currentTime))])])])])},staticRenderFns:[]};var I=a("VU/8")(b,C,!1,function(t){a("90NL")},"data-v-3df82f7e",null).exports,S={name:"historic",subscriptions:{recentHistoric:_.$recentHistoric},components:{},filters:{truncateTemperature:x.truncateTemperature,maxTemperature:x.maxFromRange,minTemperature:x.minFromRange}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return this.recentHistoric?e("svg",{staticClass:"historic"},[e("trend",{attrs:{data:this.recentHistoric,gradient:["#16a085","#2c3e50","#e74c3c"],height:240,"stroke-width":2,"auto-draw":"",smooth:""}}),this._v(" "),e("line",{staticStyle:{stroke:"#e74c3c","stroke-width":"4"},attrs:{x1:"15",y1:"0",x2:"35",y2:"0"}}),this._v(" "),e("text",{attrs:{x:"12",y:"18",fill:"#e74c3c"}},[this._v(this._s(this._f("truncateTemperature")(this._f("maxTemperature")(this.recentHistoric)))+"°")]),this._v(" "),e("line",{staticStyle:{stroke:"#16a085","stroke-width":"2"},attrs:{x1:"15",y1:"240",x2:"35",y2:"240"}}),this._v(" "),e("text",{attrs:{x:"12",y:"235",fill:"#16a085"}},[this._v(this._s(this._f("truncateTemperature")(this._f("minTemperature")(this.recentHistoric)))+"°")])],1):this._e()},staticRenderFns:[]};var U={name:"metrics",components:{status:I,historic:a("VU/8")(S,M,!1,function(t){a("3s6k")},"data-v-27afc4fe",null).exports}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"metrics"},[e("status"),this._v(" "),e("historic")],1)},staticRenderFns:[]};var w=a("VU/8")(U,k,!1,function(t){a("zmoA")},"data-v-020812d8",null).exports,R=a("mvHQ"),$=a.n(R),D=new n.a.ReplaySubject(1),E=null,N=null,A=function(){N=JSON.parse($()(E)),D.next(N)},H={$targets:D,noDaySelected:function(){D.next(null)},firstDaySelected:function(t){p.a.get("https://smart-thermostat-2c65a.firebaseio.com/settings/-L3x0J_gL97IVtVl-zzg/"+t+".json").then(function(t){E=t.data,A()})},reset:A,save:function(t){for(var e={},a=0;a<N.length;++a)e[a]=N[a];t.filter(function(t){return t.selected}).forEach(function(t){p.a.patch("https://smart-thermostat-2c65a.firebaseio.com/settings/-L3x0J_gL97IVtVl-zzg/"+t.label+".json",e)})}},F={name:"day-settings",subscriptions:{targets:H.$targets},data:function(){return{temperatureMax:25,temperatureMin:15,targetInUpdate:null,targetInUpdateIndex:null,minTime:0,maxTime:1440}},methods:{addTarget:function(t,e){var a=e.path[1].scrollWidth,s=1440*e.offsetX/a;s=5*Math.ceil(s/5);var r=this.targets[t],i=this.targets[t+1],n=(i.temperature-r.temperature)/(i.time-r.time),c=Number(r.temperature),l={time:s,temperature:n*(s-r.time)+c};this.targets.splice(t+1,0,l)},showTarget:function(t){0===t?(this.minTime=0,this.maxTime=0):t===this.targets.length-1?(this.minTime=1440,this.maxTime=1440):(this.minTime=Number(this.targets[t-1].time)+5,this.maxTime=Number(this.targets[t+1].time)-5),this.targetInUpdate=this.targets[t],this.targetInUpdateIndex=t},hideTarget:function(){this.targetInUpdate=null,this.targetInUpdateIndex=null},deleteTarget:function(){this.targets.splice(this.targetInUpdateIndex,1),this.targetInUpdate=null,this.targetInUpdateIndex=null}},computed:{lines:function(){var t=[],e=null;for(var a in this.targets)e&&t.push({index:a,x1:this.$options.filters.timeToAbsix(e.time),y1:this.$options.filters.temperatureToOrdonate(e.temperature),x2:this.$options.filters.timeToAbsix(this.targets[a].time),y2:this.$options.filters.temperatureToOrdonate(this.targets[a].temperature)}),e=this.targets[a];return t}},filters:{timeToAbsix:function(t){return t/1440*100+"%"},temperatureToOrdonate:function(t){return 100-(t-15)/10*100+"%"},minuteTimeToDisplayable:function(t){return d()(t/60)+":"+(d()(t%60)<10?"0":"")+d()(t%60)}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"daySettings"},[this.targets?a("svg",{attrs:{height:"100%",width:"100%"}},[t._l(t.lines,function(t){return a("line",{key:"displayed-"+t.index,staticStyle:{stroke:"#2c3e50","stroke-width":"2"},attrs:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}})}),t._v(" "),t._l(t.lines,function(e,s){return a("line",{key:e.index,staticClass:"hiddenWithEvent",staticStyle:{"stroke-width":"16"},attrs:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},on:{click:function(e){t.addTarget(s,e)}}})}),t._v(" "),t._l(t.targets,function(e){return a("circle",{key:"displayed-"+e.time,attrs:{cx:t._f("timeToAbsix")(e.time),cy:t._f("temperatureToOrdonate")(e.temperature),r:"8",stroke:"#2c3e50","stroke-width":"2",fill:"white"}})}),t._v(" "),t._l(t.targets,function(e,s){return a("circle",{key:e.time,staticClass:"hiddenWithEvent",attrs:{cx:t._f("timeToAbsix")(e.time),cy:t._f("temperatureToOrdonate")(e.temperature),r:"16",stroke:"#2c3e50","stroke-width":"2",fill:"white"},on:{click:function(e){t.showTarget(s)}}})}),t._v(" "),a("text",{attrs:{x:"0",y:"15",fill:"#2c3e50"}},[t._v(t._s(t.temperatureMax)+"°C")]),t._v(" "),a("text",{attrs:{x:"0",y:"100%",fill:"#2c3e50"}},[t._v(t._s(t.temperatureMin)+"°C")])],2):t._e(),t._v(" "),this.targets?t._e():a("div",{attrs:{height:"100%",width:"100%"}},[t._v("\n    Select some day to see the days settings\n  ")]),t._v(" "),t.targetInUpdate?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-header"},[t.minTime!==t.maxTime?a("h3",[t._v("Adjust target")]):a("h3",[t._v("Adjust target for "+t._s(t._f("minuteTimeToDisplayable")(t.targetInUpdate.time)))])]),t._v(" "),a("div",{staticClass:"modal-body"},[t.minTime!==t.maxTime?a("div",{staticClass:"range-slider"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.targetInUpdate.time,expression:"targetInUpdate.time"}],staticClass:"range-slider__range",attrs:{type:"range",min:t.minTime,max:t.maxTime,step:"5"},domProps:{value:t.targetInUpdate.time},on:{__r:function(e){t.$set(t.targetInUpdate,"time",e.target.value)}}}),t._v(" "),a("span",{staticClass:"range-slider__value"},[t._v(t._s(t._f("minuteTimeToDisplayable")(t.targetInUpdate.time)))])]):t._e(),t._v(" "),a("div",{staticClass:"range-slider"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.targetInUpdate.temperature,expression:"targetInUpdate.temperature"}],staticClass:"range-slider__range",attrs:{type:"range",min:t.temperatureMin,max:t.temperatureMax,step:"0.5"},domProps:{value:t.targetInUpdate.temperature},on:{__r:function(e){t.$set(t.targetInUpdate,"temperature",e.target.value)}}}),t._v(" "),a("span",{staticClass:"range-slider__value"},[t._v(t._s(t.targetInUpdate.temperature)+"°C")])])]),t._v(" "),a("div",{staticClass:"close"},[t.minTime!==t.maxTime?a("span",{staticClass:"button",on:{click:function(e){t.deleteTarget()}}},[a("p",[t._v("DELETE")])]):t._e(),t._v(" "),a("span",{staticClass:"button principal",on:{click:function(e){t.hideTarget()}}},[a("p",[t._v("CONFIRM")])])])])])]):t._e()])},staticRenderFns:[]};var V=a("VU/8")(F,O,!1,function(t){a("bb+I")},"data-v-6787b200",null).exports,j={name:"Settings",subscriptions:{targets:H.$targets},components:{"day-settings":V},data:function(){return{days:[{label:"MON",selected:!1},{label:"TUE",selected:!1},{label:"WED",selected:!1},{label:"THU",selected:!1},{label:"FRI",selected:!1},{label:"SAT",selected:!1},{label:"SUN",selected:!1}]}},methods:{toggleDay:function(t){var e=this.calculateNumberOfDaysAlreadySelected();this.days[t].selected=!this.days[t].selected,e||H.firstDaySelected(this.days[t].label),this.calculateNumberOfDaysAlreadySelected()||H.noDaySelected()},calculateNumberOfDaysAlreadySelected:function(){var t=0;for(var e in this.days)this.days[e].selected&&t++;return t},reset:function(){this.targets&&H.reset()},confirm:function(){this.targets&&H.save(this.days)}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings"},[a("ul",{staticClass:"daySelection"},t._l(t.days,function(e,s){return a("li",{key:e.label,class:{selected:e.selected},on:{click:function(e){t.toggleDay(s)}}},[t._v("\n      "+t._s(e.label)+"\n    ")])})),t._v(" "),a("day-settings",{staticClass:"daySettings"}),t._v(" "),a("div",{staticClass:"submission"},[a("span",{staticClass:"button",class:{disabled:!t.targets},on:{click:t.reset}},[a("p",[t._v("RESET")])]),t._v(" "),a("span",{staticClass:"button principal",class:{disabled:!t.targets},on:{click:t.confirm}},[a("p",[t._v("CONFIRM")])])])],1)},staticRenderFns:[]};var z=a("VU/8")(j,L,!1,function(t){a("VdBv")},"data-v-384fd139",null).exports;s.a.use(u.a);var B=new u.a({routes:[{path:"/",name:"Metrics",component:w,beforeEnter:function(t,e,a){_.retrieveCurrentTemperature(),_.updateTime(),_.retrieveRecentHistoric(),a()}},{path:"/settings",name:"Settings",component:z}]}),W={tab:"Metrics"},P={name:"app-header",data:function(){return{selected:W}},mounted:function(){W.tab=B.currentRoute.name},methods:{selectMetrics:function(){W.tab="Metrics",B.push({name:"Metrics"})},selectSettings:function(){W.tab="Settings",B.push({name:"Settings"})}}},Z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"appHeader tab-container"},[e("span",{staticClass:"tab left",class:{selected:"Metrics"===this.selected.tab},on:{click:this.selectMetrics}},[e("p",[this._v("METRICS")])]),this._v(" "),e("span",{staticClass:"tab right",class:{selected:"Settings"===this.selected.tab},on:{click:this.selectSettings}},[e("p",[this._v("SETTINGS")])])])},staticRenderFns:[]};var J={name:"app",components:{"app-header":a("VU/8")(P,Z,!1,function(t){a("B3Z9")},"data-v-728bdb64",null).exports}},G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var Y=a("VU/8")(J,G,!1,function(t){a("+Ziz")},null,null).exports;s.a.use(l.a,n.a),s.a.use(r.a),s.a.config.productionTip=!1,_.retrieveCurrentTemperature(),_.updateTime(),new s.a({el:"#app",router:B,template:"<App/>",components:{App:Y}})},VdBv:function(t,e){},"bb+I":function(t,e){},zmoA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.64af6dddeee2cefe0608.js.map